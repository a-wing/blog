---
layout: post
title: "创新者异闻录（5/7）——无人机自动机场"
author: "Metal A-wing"
date: 2021-02-21 23:20:00 +0800
image: "/assets/img/innovator/sb-video-poster.jpg"
banner: "/assets/img/innovator/sb-video-poster.jpg"
categories: self
---

这篇文章有很多没法详细说的东西，需要想象力。想象这个东西是什么样子的（最好先看几集高达）

![sbim superdock](/assets/img/innovator/sb-video-poster.jpg)

## 无人机航拍的作业流程

- 前一天，把电池充满电（锂电池的最佳保存电压不是满电）
- 去现场
- 拿出飞机
- 安装桨叶
- 校准磁罗盘
- 安装 SD 卡
- 启动遥控器
- 连接手机
- 启动飞机
- 起飞前检查，等待 GNSS 信号
- 起飞
- 作业（切换模式：飞个固定航线）
- 降落
- 拔出 SD 卡
- 下载数据
- 回去处理数据

这是一个固定的流程，每次使用都要重复。或许可以使用一个机器来完成这些动作

## 无人机自动机场的开始：airobotics 和 intel

无人机自动机场的历史可以追溯到美国空军在 1968 年首次尝试使用地面状态下的 “盒子里的无人机” 技术。解决面临高操作和维护成本。

随着近年来小型无人机商用无人机的发展。终于，出现了自动商用无人机解决方案。

2017 年 intel 的 [Airobotics](https://www.airoboticsdrones.com/)，是世界上第一个被授权在没有飞行员的情况下驾驶全自动无人机，允许超视距商用无人机 超视距飞行（（BVLOS）Beyond Visual Line of Sight） 操作

<div align="center">
<img alt="Airobotics Solution" src="/assets/img/innovator/drone_flying.gif">
<img alt="Automated Industrial Drones Solution" src="/assets/img/innovator/drone_box.png">
</div>

> 传统的无人驾驶飞机（uav）包括一架无人驾驶飞机和某种形式的地面控制器。
>
> （UAV = 无人的飞机 + 地面控制器）
>
> 另外，“盒中无人机” 系统可以在一个盒子上自动运行，盒子同时也可以作为起落平台和充电基地。
> 在执行了预先设定的指令列表后，他们会回到 “基地” 进行充电和上传信息。

让无人机完全自动运行的系统由三个主要组件组成：

1. 无人机本身
2. 为无人机充电和收纳无人机的地面站（就是无人机自动机场）
3. 允许操作员与系统交互的计算机管理系统（下一篇文章会讲的：无人机自动系统）

## 无人机自动机场是什么

我们先来思考一个问题。我每天都要用无人机去拍一遍某样东西（举个例子：工地吧），每天固定航线，固定开机，维护电池都需要人来控制（专业领域无人机操作，要考证的，要专门的飞手），每天都拍到的东西都一点区别。

无人机场存在的价值就是为了把这个人省掉，收纳无人机，自动充电（或换电池），中继无人机通信。简单的说：就是无人机的飞行再也不需要人来干预（把地面的人也给省掉了）

无人机的无人，是把坐在飞机上的驾驶员省掉了。驾驶员在地面上远程控制。无人机自动机场：是把地面上的拿着遥控器的驾驶员也省掉了，换成一个机器，全自动的工作

无人机自动机场是一个集无人机收纳和电源管理为一体的设备。更本质上来说：**让无人机实现自动飞行的辅助硬件**

这篇是我们同行写的：[深度解读：无人机机场是什么？](https://zhuanlan.zhihu.com/p/225569044)

## 无人机自动机场实现的基础

**无人机自动机场** 实现的基础是 **无人机全自动飞行** 。自动飞行，起飞条件判断，自动降落，异常处理

自动飞行这个分成两种情况：**按照固定航线飞行** 和 **全自主飞行**

按照固定航线飞行就是事先规划好航线，无人机按照这个航线飞行

全自主飞行 目前技术上只有极少数有能力做这个

### 无人机协处理器

起飞条件判断，自动降落，异常处理 该如何实现。上面挂一个上位机来判断条件，模拟人的手动控制（我原来拆过一台做无人机表演的飞机，也是这么干的，参照前面的文章）

为什么会有这么畸形的实现，因为无人机飞控过于复杂（RTOS 有实时性要求），之后就产生了一种新思路，把无人机飞控当黑盒来使用，模拟人的控制程序放到上位机（比如：放个树莓派）。上位机负责和机场通信和航线选择

无人机和无人机自动机场放在一起时，就出现了一个全新的需求，自动飞行完数据如何采集，如何远程控制飞机，定时执行任务，自动调度，需要一个无人机控制中心来控制这些无人机和自动机场

## 起飞前检测

飞机对于天气的要求是很高的。但要检测的项目可能是个不固定的，飞机可能会挂个特殊的挂载，然后再起飞前去检查这个特殊的挂载的状态是否符合要求。
有些判断需要硬件接口的支持。比如为了实时风速的准确要加个风速传感器。

判断电源判断，这个有意思，有些飞机要开机之后才能通过 API 读到电量。飞机上设备都很耗电的（就算螺旋桨不动，其他部件也很耗电）。所以有时可以看到怪异情况，飞机先开机，读一下电量，之后再关机

## 精准降落

比如把大疆精灵降落到 `1m*1m` 的平面内，这听起来似乎很容易。如果加个限制条件：完全自动控制。100% 一定要成功（不成功就成仁了）

> 地面效应，侧面风，异常处理

关于精准降落时如何实现的，属于商业机密。（等到过几年，不是机密时我再来讲吧）。不过可以讲几种目前公开的，大家都知道的方法

### GNSS 的误差

因为有机场的存在，可以正好把 RTK 的基站放到机场里面。RTK 可以达到厘米级误差，那不是很容易

GNSS/RTK 有信号不好的时候，这对于降落到机场里面是致命的。信号不好可以一直等，但飞机在飞行，不能一直等下去

当然我们可以找一个很空的地方，作为飞机降落的备用点，至少可以保证飞机不炸机。之后派人过去处理（降落时基本上都是就快没电了）

### 红外引导降落

GNSS/RTK 就算再不济也能把误差控制在 1M 以内。只要在这个范围内提高精度就可以了

典型的就是开源飞控的 [IR-Lock](https://irlock.com/) （IR（Infrared）红外线）方案，分成三部分 红外信标，特制的摄像头，高精度测距模块（一般是激光雷达）

红外信标放在降落点发射红外信号，特殊的摄像头在机身下面来识别，配合高度解出相对位置来控制精准降落

### 大疆的图像识别方案

可以使用纯软件的方式来实现类似 IR-Lock 的功能。飞机在刚起飞时摄像头朝下拍一张照片，飞机降落时摄像头朝下和起飞时的照片对比，找到起飞点。大疆的飞机就内置了这样的功能。不过精准降落需要地面有明显的纹理，用于下视传感器的识别

### 大小二维码

原理是多个尺寸不同的二维码，高度高时使用大的，高度低时使用小的，不断缩小定位精度

[Drone Precision Landing System With Widest Compatibility](https://flytbase.com/precision-landing/)

### Ultra-Wideband（UWB）

VR 应该大家都熟悉，有人思考过把 VR 的定位方案放到无人机上吗？根据。GNSS/RTK 的方案再配合空间定位，可以精准的知道位置。

VR 的定位方案有很多，UWB 是其中之一，iPhone11 也在硬件上加入了这个东西

[A UWB positioning network enabling unmanned aircraft systems auto land](https://www.sciencedirect.com/science/article/abs/pii/S1270963816306277)

### Simultaneous localization and mapping（SLAM）

[同时定位与地图构建](https://zh.wikipedia.org/wiki/%E5%90%8C%E6%97%B6%E5%AE%9A%E4%BD%8D%E4%B8%8E%E5%9C%B0%E5%9B%BE%E6%9E%84%E5%BB%BA)

这个又回到了 视觉识别，这个是用双目摄像头来感知来识别

## 无人机机场需要有什么？

这个问题其实很复杂，要考虑的问题很多。比如：给无人机充电，收纳无人机，信号中继

### 电源管理

如果要个无人机充电，给电源接到无人机上，目前有两个思路，有线像电源插头一样，插上。无线充电线圈

由于无线充电线圈的实际效果过于拉垮，线圈很重，对无人机这点太要命了。而且充电效率太低

目前实际使用还是要有线充电，这样就要把插头插进去，无人机自动降落到平台上的精度远远不够，所以需要一个物理上的机械结构把他归正到位置上，然后把插头插上（想象一下，高达那个回到仓位，固定器把高达固定的场景）

虽然我也很想配个图来说明这个。不过，由于这个实现目前还是保密内容，这里请自行想象：有两个互相垂直的轴，每次把飞机推到一个固定位置后，连接电源

也有每次给飞机换电池的，有用机械手的，也有特殊设计的机械结构的。这方面没有公开的信息，请自行脑补（想象一下，给高达换燃料包）

### 收纳无人机

这个东西是一直工作在室外，无人机是很娇贵的，当然不能暴露在外面。收纳无人机就涉及到舱门（就和高达里的母舰打开舱门，放出高达一样。机场打开舱门，飞机飞出去）

机场里面要有温控系统，保暖或制冷（电池比较娇贵），当然也要防雨

### 信号中继

这个取决于无人机使用了什么样的通信方案，如果无人机可以使用 4G 或 5G。那就不需要中继信号了

如果使用其他频段的信号来通信，通信汇总到机场，然后透过网络给云端的控制系统。一般都需要一个信号塔，或者把天线伸出来

## 异常处理

如果这个东西附近没有人，完全自动运行，要考虑所有的异常情况。在工作流下，任何一个地方都是可能出问题的。软件，机械，电子。所以要把所以可能出现的情况都考虑进去

### 供电异常 UPS

试想一个情况，飞机飞出去执行任务了。然后停电了。设备突然断电会导致一些组件的异常，软件的，硬件的都会有。

### 降落异常 备用点

虽然考虑了这么多。但还是可能存在异常情况，对待完全预计之外无法降落的情况。就降落到备用点

### 降落异常 远程手动降落

对于一些异常情况，可能需要人远程控制无人机（把通知直接发到手机上）。把遥控器底层的控制信号，在控制系统里面也实现一个，直接远程看图传，模拟遥控器，手动控制降落

## 紧急停止

你知道飞机解锁时的内八吧，如果你在天空中持续这个动作一会（执行上锁），飞机会紧急停止（一键炸机）然后掉下来。

Why is it so designed？

[说说大疆创新产品内外八字掰杆停机的那些事儿 - KANZHAJI 看炸机-无人机资讯站](https://kanzhaji.com/sitemaster/7341.html)

作为一个具有物理实体的机器人系统，一定要考虑失控的问题，要有急停

> 安全第一，可以把零件的强度做的很低，碰到人的时候自己会先一步坏掉。尽量不要存在伤到人的可能性。
>
> 有些工厂里的设备明明一只手就可以操作，但设计上是一定两只手同时使用，这样就不会有空余的手乱放，降低出事故的风险

讲个故事吧：我同事在调试设备的时候没注意，设备动了起来，夹到手了。如果没有急停，手可能就废了。。。

> 三星工厂发生停电事故，内存、闪存、固态硬盘价格可能要涨

相信大家对这个应该都记忆犹新，对于一个从不关机的设备来说，停电或急停并不只是机器停下来。急停后的恢复过程可能是非常长的

## 换吊舱，换负载，送快递，送外卖

这个是成本问题：飞机和机场做的足够便宜，就不需要换吊舱

送快递和外卖也是，反正不会从 China Mainland 开始普及

这个鬼地方人工太便宜了，比机器人还便宜，除非电池技术有突破性的进展，或者人力成本突然涨起来（主要成本是电池寿命，电池是消耗品（大概 100～200 个循环，还有其他因素，充电策略，温度都会影响））

## 未来的无人机——大疆的新挑战者 [skydio](https://skydio.com/)

这样的自主飞行才是未来，才是真正的无人，对于周围环境实时建模（SLAM），自主规划路径

<iframe width="560" height="315" src="https://www.youtube.com/embed/Gh5pAT1o2V8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

